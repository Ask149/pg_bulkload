/*
 * pg_bulkload.sql
 * 
 *    Copyright(C) 2007-2009, NIPPON TELEGRAPH AND TELEPHONE CORPORATION
 */

-- Adjust this setting to control where the objects get created.
SET search_path = public;

BEGIN;

CREATE FUNCTION pg_bulkload(ctlfilename text)
	RETURNS bigint
	AS 'MODULE_PATHNAME', 'pg_bulkload' LANGUAGE C;

CREATE FUNCTION pg_bulkload(ctlfilename text, options text)
	RETURNS bigint
	AS 'MODULE_PATHNAME', 'pg_bulkload' LANGUAGE C;

CREATE FUNCTION pg_bulkread(ctlfilename text)
	RETURNS SETOF record
	AS 'MODULE_PATHNAME', 'pg_bulkread' LANGUAGE C;

CREATE FUNCTION pg_bulkread(ctlfilename text, options text)
	RETURNS SETOF record
	AS 'MODULE_PATHNAME', 'pg_bulkread' LANGUAGE C;

CREATE FUNCTION pg_bulkread(ctlfilename text, options text, anyelement)
	RETURNS SETOF anyelement
	AS 'MODULE_PATHNAME', 'pg_bulkread' LANGUAGE C;

-- Load with aggregates
CREATE FUNCTION pg_bulkwrite_accum(internal, regclass, record)
	RETURNS internal
	AS 'MODULE_PATHNAME', 'pg_bulkwrite_accum' LANGUAGE C;

CREATE FUNCTION pg_bulkwrite_finish(internal)
	RETURNS bigint
	AS 'MODULE_PATHNAME', 'pg_bulkwrite_finish' LANGUAGE C;

CREATE AGGREGATE pg_bulkwrite(regclass, record)
(
	SFUNC = pg_bulkwrite_accum,
	STYPE = internal,
	FINALFUNC = pg_bulkwrite_finish
);

COMMIT;
